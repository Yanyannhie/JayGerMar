<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Pathforged Rental â€” Car Rental Philippines</title>
<style>
  body {
    font-family: 'Poppins', sans-serif;
    background: linear-gradient(180deg, #fff6fa, #ffe0f0);
    color: #5a2d38;
    margin: 0;
    padding: 0;
  }
  header {
    background-color: #ffcce0;
    text-align: center;
    padding: 20px;
    color: #5a2d38;
    border-bottom: 3px solid #ff99c8;
  }
  h1 {
    margin: 0;
    font-size: 28px;
    letter-spacing: 1px;
  }
  .container {
    width: 90%;
    max-width: 1000px;
    margin: 30px auto;
    background: white;
    border-radius: 15px;
    padding: 20px;
    box-shadow: 0 0 15px rgba(255, 150, 190, 0.3);
  }
  input, select, button {
    padding: 8px;
    margin: 5px 0;
    border-radius: 8px;
    border: 1px solid #ffb6c1;
  }
  button {
    background-color: #ffcce0;
    border: none;
    cursor: pointer;
    color: #5a2d38;
    font-weight: 600;
  }
  button:hover {
    background-color: #ff99c8;
  }
  table {
    width: 100%;
    border-collapse: collapse;
    margin-top: 15px;
  }
  th, td {
    border: 1px solid #ffb6c1;
    padding: 8px;
    text-align: center;
  }
  th {
    background-color: #ffe6f0;
  }
  .hidden {
    display: none;
  }
  .approve-btn {
    background: #a8e6cf;
  }
  .reject-btn {
    background: #ffaaa5;
  }
  .logout-btn {
    background: #ffb6c1;
  }
</style>
</head>
<body>

<header>
  <h1>ðŸŒ¸ Pathforged Rental ðŸŒ¸</h1>
  <img src="Meme face.jpg" sizes="200" width="200">
  <p>Car Rental Service in the Philippines</p>
</header>

<div class="container" id="loginPage">
  <h2>Login</h2>
  <label>Username:</label><br>
  <input type="text" id="loginUser"><br>
  <label>Password:</label><br>
  <input type="password" id="loginPass"><br><br>
  <button onclick="login()">Sign In</button>
</div>

<div class="container hidden" id="userPage">
  <h2>User Dashboard</h2>
  <p>Welcome, <span id="displayUser"></span>!</p>

  <h3>Personal Details</h3>
  <label>Full Name:</label><br>
  <input type="text" id="fullname"><br>
  <label>Contact Number:</label><br>
  <input type="text" id="contact"><br>

  <h3>Car Rental Details</h3>
  <label>Select Car:</label><br>
  <select id="car">
    <option value="Toyota Vios" data-rate="2000">Toyota Vios â€” â‚±2000/day</option>
    <option value="Honda City" data-rate="2200">Honda City â€” â‚±2200/day</option>
    <option value="Mitsubishi Mirage" data-rate="1800">Mitsubishi Mirage â€” â‚±1800/day</option>
    <option value="Toyota Fortuner" data-rate="3500">Toyota Fortuner â€” â‚±3500/day</option>
  </select><br>

  <label>Destination:</label><br>
  <select id="destination">
    <option value="Manila" data-fee="500">Manila â€” â‚±500</option>
    <option value="Cebu" data-fee="1000">Cebu â€” â‚±1000</option>
    <option value="Davao" data-fee="1200">Davao â€” â‚±1200</option>
  </select><br>

  <label>Days of Rent:</label><br>
  <input type="number" id="days" min="1" value="1"><br><br>

  <button onclick="addBooking()">Add</button>
  <button onclick="editBooking()">Edit</button>
  <button onclick="deleteBooking()">Delete</button>

  <h3>Your Bookings</h3>
  <table id="userTable">
    <tr>
      <th>#</th>
      <th>Car</th>
      <th>Destination</th>
      <th>Days</th>
      <th>Total (â‚±)</th>
      <th>Status</th>
    </tr>
  </table>

  <p><b>Total Summary:</b> <span id="totalSummary">â‚±0</span></p>
  <button class="logout-btn" onclick="logout()">Logout</button>
</div>

<div class="container hidden" id="adminPage">
  <h2>Admin Dashboard</h2>
  <table id="adminTable">
    <tr>
      <th>#</th>
      <th>User</th>
      <th>Car</th>
      <th>Destination</th>
      <th>Days</th>
      <th>Total (â‚±)</th>
      <th>Status</th>
      <th>Action</th>
    </tr>
  </table>
  <button class="logout-btn" onclick="logout()">Logout</button>
</div>

<script>
const STORAGE_KEY = "pathforged_rental_data";

// --- LOGIN ---
function login() {
  const user = document.getElementById("loginUser").value;
  const pass = document.getElementById("loginPass").value;

  if (user === "admin" && pass === "admin123") {
    document.getElementById("loginPage").classList.add("hidden");
    document.getElementById("adminPage").classList.remove("hidden");
    loadAdmin();
  } else if (user && pass) {
    localStorage.setItem("currentUser", user);
    document.getElementById("loginPage").classList.add("hidden");
    document.getElementById("userPage").classList.remove("hidden");
    document.getElementById("displayUser").textContent = user;
    loadUser();
  } else {
    alert("Enter valid login details.");
  }
}

// --- LOGOUT ---
function logout() {
  document.getElementById("loginPage").classList.remove("hidden");
  document.getElementById("userPage").classList.add("hidden");
  document.getElementById("adminPage").classList.add("hidden");
  localStorage.removeItem("currentUser");
}

// --- DATA FUNCTIONS ---
function getData() {
  return JSON.parse(localStorage.getItem(STORAGE_KEY)) || [];
}
function saveData(data) {
  localStorage.setItem(STORAGE_KEY, JSON.stringify(data));
}

// --- ADD BOOKING ---
function addBooking() {
  const fullname = document.getElementById("fullname").value;
  const contact = document.getElementById("contact").value;
  const carEl = document.getElementById("car");
  const destEl = document.getElementById("destination");
  const days = parseInt(document.getElementById("days").value);
  const car = carEl.value;
  const rate = parseInt(carEl.options[carEl.selectedIndex].dataset.rate);
  const destination = destEl.value;
  const fee = parseInt(destEl.options[destEl.selectedIndex].dataset.fee);
  const total = rate * days + fee;
  const user = localStorage.getItem("currentUser");

  if (!fullname || !contact) return alert("Please fill out personal details.");

  const all = getData();
  all.push({
    id: Date.now(),
    user,
    fullname,
    contact,
    car,
    destination,
    days,
    total,
    status: "Pending"
  });
  saveData(all);
  loadUser();
}

// --- LOAD USER BOOKINGS ---
function loadUser() {
  const user = localStorage.getItem("currentUser");
  const data = getData().filter(d => d.user === user);
  const table = document.getElementById("userTable");
  table.innerHTML = `<tr><th>#</th><th>Car</th><th>Destination</th><th>Days</th><th>Total (â‚±)</th><th>Status</th></tr>`;
  let totalSum = 0;
  data.forEach((d, i) => {
    totalSum += d.total;
    const row = table.insertRow();
    row.insertCell(0).textContent = i + 1;
    row.insertCell(1).textContent = d.car;
    row.insertCell(2).textContent = d.destination;
    row.insertCell(3).textContent = d.days;
    row.insertCell(4).textContent = d.total;
    row.insertCell(5).textContent = d.status;
  });
  document.getElementById("totalSummary").textContent = "â‚±" + totalSum;
}

// --- EDIT BOOKING (edits latest) ---
function editBooking() {
  const user = localStorage.getItem("currentUser");
  const data = getData();
  const userBookings = data.filter(d => d.user === user);
  if (userBookings.length === 0) return alert("No booking to edit.");
  const latest = userBookings[userBookings.length - 1];
  const newDays = parseInt(prompt("Enter new number of days:", latest.days));
  if (!newDays) return;
  latest.days = newDays;
  latest.total = newDays * 2000;
  saveData(data);
  loadUser();
}

// --- DELETE BOOKING (delete latest) ---
function deleteBooking() {
  const user = localStorage.getItem("currentUser");
  let data = getData();
  data = data.filter(d => d.user !== user || d.status !== "Pending");
  saveData(data);
  loadUser();
}

// --- ADMIN LOAD ---
function loadAdmin() {
  const data = getData();
  const table = document.getElementById("adminTable");
  table.innerHTML = `<tr><th>#</th><th>User</th><th>Car</th><th>Destination</th><th>Days</th><th>Total (â‚±)</th><th>Status</th><th>Action</th></tr>`;
  data.forEach((d, i) => {
    const row = table.insertRow();
    row.insertCell(0).textContent = i + 1;
    row.insertCell(1).textContent = d.fullname;
    row.insertCell(2).textContent = d.car;
    row.insertCell(3).textContent = d.destination;
    row.insertCell(4).textContent = d.days;
    row.insertCell(5).textContent = d.total;
    row.insertCell(6).textContent = d.status;
    const act = row.insertCell(7);
    act.innerHTML = `
      <button class="approve-btn" onclick="approve(${d.id})">Approve</button>
      <button class="reject-btn" onclick="reject(${d.id})">Reject</button>
    `;
  });
}

// --- ADMIN ACTIONS ---
function approve(id) {
  const data = getData();
  const item = data.find(d => d.id === id);
  if (item) item.status = "Approved";
  saveData(data);
  loadAdmin();
}
function reject(id) {
  const data = getData();
  const item = data.find(d => d.id === id);
  if (item) item.status = "Rejected";
  saveData(data);
  loadAdmin();
}
</script>
</body>
</html>

